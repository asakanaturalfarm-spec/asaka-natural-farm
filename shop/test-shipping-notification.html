<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç™ºé€é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ  - çµ±åˆãƒ†ã‚¹ãƒˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        h1 {
            color: #2c5f2d;
            margin-bottom: 30px;
        }

        .test-section {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .test-section h2 {
            color: #2c5f2d;
            font-size: 18px;
            margin-bottom: 15px;
        }

        .test-item {
            padding: 10px;
            margin-bottom: 10px;
            border-left: 4px solid #ddd;
            background: #f9f9f9;
            border-radius: 4px;
        }

        .test-item.success {
            border-left-color: #4caf50;
            background: #f1f8f4;
        }

        .test-item.error {
            border-left-color: #f44336;
            background: #fdebee;
        }

        .test-item.warning {
            border-left-color: #ff9800;
            background: #fff3e0;
        }

        .test-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .test-value {
            font-family: monospace;
            font-size: 12px;
            color: #666;
            overflow-x: auto;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 14px;
        }

        .btn-primary {
            background: #2c5f2d;
            color: white;
        }

        .btn-primary:hover {
            background: #1e4620;
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #333;
            border: 1px solid #ddd;
        }

        .test-result {
            padding: 10px;
            margin-top: 10px;
            border-radius: 4px;
            display: none;
        }

        .test-result.show {
            display: block;
        }

        .result-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .result-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .stat-card {
            padding: 15px;
            background: #f0f7f0;
            border-radius: 8px;
            text-align: center;
        }

        .stat-label {
            font-size: 12px;
            color: #999;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #2c5f2d;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background: #f0f0f0;
            font-weight: 600;
        }

        .code-block {
            background: #f5f5f5;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 4px;
            margin-top: 10px;
            overflow-x: auto;
            font-family: monospace;
            font-size: 12px;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“§ ç™ºé€é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ  - çµ±åˆãƒ†ã‚¹ãƒˆ</h1>

        <!-- ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«èª­ã¿è¾¼ã¿ãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <h2>1ï¸âƒ£ ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«èª­ã¿è¾¼ã¿ãƒ†ã‚¹ãƒˆ</h2>
            <button class="btn btn-primary" onclick="testModuleLoading()">ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
            <div id="module-test-results"></div>
        </div>

        <!-- ãƒ‡ãƒ¼ã‚¿åŒæœŸãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <h2>2ï¸âƒ£ å—æ³¨ç™ºæ³¨ç®¡ç†ã‚¢ãƒ—ãƒªé€£æºãƒ†ã‚¹ãƒˆ</h2>
            <button class="btn btn-primary" onclick="testOrderSync()">åŒæœŸãƒ†ã‚¹ãƒˆ</button>
            <button class="btn btn-secondary" onclick="testOrderSyncFunctions()">é–¢æ•°ãƒ†ã‚¹ãƒˆ</button>
            <button class="btn btn-secondary" onclick="loadSampleData()">ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ</button>
            <div id="sync-test-results"></div>
        </div>

        <!-- æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º -->
        <div class="test-section">
            <h2>3ï¸âƒ£ æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿ç¢ºèª</h2>
            <button class="btn btn-primary" onclick="displayOrders()">æ³¨æ–‡è¡¨ç¤º</button>
            <button class="btn btn-secondary" onclick="displayCustomers()">é¡§å®¢è¡¨ç¤º</button>
            <button class="btn btn-secondary" onclick="displayStats()">çµ±è¨ˆè¡¨ç¤º</button>
            <div id="order-data-results"></div>
        </div>

        <!-- ç®¡ç†è€…é€šçŸ¥ãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <h2>4ï¸âƒ£ ç®¡ç†è€…é€šçŸ¥æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h2>
            <button class="btn btn-primary" onclick="testAdminNotification()">é€šçŸ¥ãƒ†ã‚¹ãƒˆ</button>
            <button class="btn btn-secondary" onclick="testEmailGeneration()">ãƒ¡ãƒ¼ãƒ«ç”Ÿæˆ</button>
            <div id="notification-test-results"></div>
        </div>

        <!-- ã‚·ã‚¹ãƒ†ãƒ ãƒã‚§ãƒƒã‚¯ -->
        <div class="test-section">
            <h2>5ï¸âƒ£ ã‚·ã‚¹ãƒ†ãƒ ãƒã‚§ãƒƒã‚¯</h2>
            <button class="btn btn-primary" onclick="runSystemCheck()">ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ</button>
            <div id="system-check-results"></div>
        </div>

        <!-- ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚° -->
        <div class="test-section">
            <h2>6ï¸âƒ£ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h2>
            <button class="btn btn-secondary" onclick="clearAllCache()">ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢</button>
            <button class="btn btn-secondary" onclick="viewLocalStorage()">LocalStorageç¢ºèª</button>
            <button class="btn btn-secondary" onclick="viewConsole()">ã‚³ãƒ³ã‚½ãƒ¼ãƒ«è¡¨ç¤º</button>
            <div id="troubleshoot-results"></div>
        </div>
    </div>

    <script src="../asaka-hub.js"></script>
    <script src="sync-with-orders.js"></script>
    <script src="admin-notification-manager.js"></script>

    <script>
        // ãƒ†ã‚¹ãƒˆçµæœã‚’ãƒ­ã‚°ã«è¿½åŠ 
        function addTestResult(containerId, label, value, type = 'info') {
            const container = document.getElementById(containerId);
            if (!container) return;

            const item = document.createElement('div');
            item.className = `test-item ${type === 'error' ? 'error' : type === 'success' ? 'success' : type === 'warning' ? 'warning' : ''}`;
            item.innerHTML = `
                <div class="test-label">${label}</div>
                <div class="test-value">${typeof value === 'object' ? JSON.stringify(value, null, 2) : value}</div>
            `;
            container.appendChild(item);
        }

        // 1. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«èª­ã¿è¾¼ã¿ãƒ†ã‚¹ãƒˆ
        function testModuleLoading() {
            const results = document.getElementById('module-test-results');
            results.innerHTML = '';

            // OrderSyncManager ãƒã‚§ãƒƒã‚¯
            if (window.OrderSyncManager) {
                addTestResult('module-test-results', 'âœ“ OrderSyncManager', 'ãƒ­ãƒ¼ãƒ‰æˆåŠŸ', 'success');
            } else {
                addTestResult('module-test-results', 'âœ— OrderSyncManager', 'ãƒ­ãƒ¼ãƒ‰å¤±æ•—', 'error');
            }

            // AdminNotificationManager ãƒã‚§ãƒƒã‚¯
            if (window.AdminNotificationManager) {
                addTestResult('module-test-results', 'âœ“ AdminNotificationManager', 'ãƒ­ãƒ¼ãƒ‰æˆåŠŸ', 'success');
            } else {
                addTestResult('module-test-results', 'âœ— AdminNotificationManager', 'ãƒ­ãƒ¼ãƒ‰å¤±æ•—', 'error');
            }

            // PRODUCTS_MASTER ãƒã‚§ãƒƒã‚¯
            if (window.PRODUCTS_MASTER && window.PRODUCTS_MASTER.length > 0) {
                addTestResult('module-test-results', 'âœ“ PRODUCTS_MASTER', `${window.PRODUCTS_MASTER.length}ä»¶ã®ãƒ‡ãƒ¼ã‚¿`, 'success');
            } else {
                addTestResult('module-test-results', 'âœ— PRODUCTS_MASTER', 'ãƒ‡ãƒ¼ã‚¿ãªã—', 'warning');
            }
        }

        // 2. ãƒ‡ãƒ¼ã‚¿åŒæœŸãƒ†ã‚¹ãƒˆ
        function testOrderSync() {
            const results = document.getElementById('sync-test-results');
            results.innerHTML = '';

            try {
                const data = window.OrderSyncManager.syncFromOrdersApp();
                addTestResult('sync-test-results', 'ãŠå®¢æ§˜ãƒ‡ãƒ¼ã‚¿', `${data.customers.length}ä»¶`, 'success');
                addTestResult('sync-test-results', 'æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿', `${data.orders.length}ä»¶`, 'success');
                addTestResult('sync-test-results', 'å•†å“ãƒ‡ãƒ¼ã‚¿', `${data.products.length}ä»¶`, 'success');
                addTestResult('sync-test-results', 'åŒæœŸæ™‚åˆ»', data.lastSync, 'success');
            } catch (error) {
                addTestResult('sync-test-results', 'ã‚¨ãƒ©ãƒ¼', error.message, 'error');
            }
        }

        // åŒæœŸé–¢æ•°ãƒ†ã‚¹ãƒˆ
        function testOrderSyncFunctions() {
            const results = document.getElementById('sync-test-results');
            results.innerHTML = '';

            try {
                const data = window.OrderSyncManager.syncFromOrdersApp();

                if (data.customers.length > 0) {
                    const customer = window.OrderSyncManager.getCustomerById(data.customers[0].id);
                    addTestResult('sync-test-results', 'getCustomerById() ãƒ†ã‚¹ãƒˆ', customer ? 'æˆåŠŸ' : 'å¤±æ•—', customer ? 'success' : 'error');
                }

                if (data.orders.length > 0) {
                    const order = window.OrderSyncManager.getOrderById(data.orders[0].id);
                    addTestResult('sync-test-results', 'getOrderById() ãƒ†ã‚¹ãƒˆ', order ? 'æˆåŠŸ' : 'å¤±æ•—', order ? 'success' : 'error');
                }

                const stats = window.OrderSyncManager.getOrderStats();
                addTestResult('sync-test-results', 'çµ±è¨ˆæƒ…å ±', `ç·æ³¨æ–‡: ${stats.totalOrders}ä»¶`, 'success');
            } catch (error) {
                addTestResult('sync-test-results', 'ã‚¨ãƒ©ãƒ¼', error.message, 'error');
            }
        }

        // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
        function loadSampleData() {
            const results = document.getElementById('sync-test-results');
            results.innerHTML = '';

            try {
                // ã‚µãƒ³ãƒ—ãƒ«é¡§å®¢
                const customers = [
                    { id: 'cust_001', name: 'å±±ç”°å¤ªéƒ', email: 'yamada@example.com', phone: '090-1234-5678', address: 'ã€’963-0201 ç¦å³¶çœŒéƒ¡å±±å¸‚å¤§æ§»ç”ºå­—å‰ç•‘60' },
                    { id: 'cust_002', name: 'ä½è—¤èŠ±å­', email: 'sato@example.com', phone: '090-9876-5432', address: 'ã€’960-8034 ç¦å³¶çœŒç¦å³¶å¸‚ç½®è³œç”º1-1' }
                ];

                // ã‚µãƒ³ãƒ—ãƒ«æ³¨æ–‡
                const orders = [
                    {
                        id: 'ORD_20260122001',
                        customerId: 'cust_001',
                        orderDate: '2026-01-22',
                        items: [
                            { name: 'ã»ã†ã‚Œã‚“è‰', quantity: 3, productId: 'v1', unitPrice: 500 },
                            { name: 'æ°´èœ', quantity: 2, productId: 'v4', unitPrice: 420 }
                        ],
                        totalAmount: 2340,
                        status: 'pending',
                        paymentMethod: 'ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰'
                    },
                    {
                        id: 'ORD_20260121003',
                        customerId: 'cust_002',
                        orderDate: '2026-01-21',
                        items: [
                            { name: 'å°æ¾èœ', quantity: 2, productId: 'v2', unitPrice: 450 },
                            { name: 'ãƒãƒ³ã‚²ãƒ³èœ', quantity: 1, productId: 'v6', unitPrice: 430 }
                        ],
                        totalAmount: 1330,
                        status: 'shipped',
                        paymentMethod: 'ã‚³ãƒ³ãƒ“ãƒ‹æ±ºæ¸ˆ'
                    }
                ];

                // localStorage ã«ä¿å­˜
                localStorage.setItem('orderManagement_customers', JSON.stringify(customers));
                localStorage.setItem('unified_orders', JSON.stringify(orders));

                addTestResult('sync-test-results', 'ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ä½œæˆ', 'ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã—ã¾ã—ãŸ', 'success');
                addTestResult('sync-test-results', 'ãŠå®¢æ§˜ãƒ‡ãƒ¼ã‚¿', `${customers.length}ä»¶ç”Ÿæˆ`, 'success');
                addTestResult('sync-test-results', 'æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿', `${orders.length}ä»¶ç”Ÿæˆ`, 'success');
            } catch (error) {
                addTestResult('sync-test-results', 'ã‚¨ãƒ©ãƒ¼', error.message, 'error');
            }
        }

        // æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º
        function displayOrders() {
            const results = document.getElementById('order-data-results');
            results.innerHTML = '';

            try {
                const data = window.OrderSyncManager.syncFromOrdersApp();
                if (data.orders.length === 0) {
                    addTestResult('order-data-results', 'æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿', 'ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚', 'warning');
                    return;
                }

                let html = '<table>';
                html += '<tr><th>æ³¨æ–‡ID</th><th>é¡§å®¢</th><th>æ—¥ä»˜</th><th>é‡‘é¡</th><th>çŠ¶æ…‹</th></tr>';

                data.orders.forEach(order => {
                    const formatted = window.OrderSyncManager.formatOrderForAdmin(order);
                    html += `<tr>
                        <td>${formatted.id}</td>
                        <td>${formatted.customerName}</td>
                        <td>${formatted.orderDate}</td>
                        <td>Â¥${formatted.total.toLocaleString('ja-JP')}</td>
                        <td>${formatted.status}</td>
                    </tr>`;
                });

                html += '</table>';
                results.innerHTML = html;
            } catch (error) {
                addTestResult('order-data-results', 'ã‚¨ãƒ©ãƒ¼', error.message, 'error');
            }
        }

        // é¡§å®¢ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º
        function displayCustomers() {
            const results = document.getElementById('order-data-results');
            results.innerHTML = '';

            try {
                const data = window.OrderSyncManager.syncFromOrdersApp();
                if (data.customers.length === 0) {
                    addTestResult('order-data-results', 'é¡§å®¢ãƒ‡ãƒ¼ã‚¿', 'ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“', 'warning');
                    return;
                }

                let html = '<table>';
                html += '<tr><th>ID</th><th>åå‰</th><th>ãƒ¡ãƒ¼ãƒ«</th><th>é›»è©±</th></tr>';

                data.customers.forEach(customer => {
                    html += `<tr>
                        <td>${customer.id}</td>
                        <td>${customer.name}</td>
                        <td>${customer.email}</td>
                        <td>${customer.phone || '-'}</td>
                    </tr>`;
                });

                html += '</table>';
                results.innerHTML = html;
            } catch (error) {
                addTestResult('order-data-results', 'ã‚¨ãƒ©ãƒ¼', error.message, 'error');
            }
        }

        // çµ±è¨ˆè¡¨ç¤º
        function displayStats() {
            const results = document.getElementById('order-data-results');
            results.innerHTML = '';

            try {
                const stats = window.OrderSyncManager.getOrderStats();
                let html = '<div class="stats">';
                html += `<div class="stat-card"><div class="stat-label">ç·æ³¨æ–‡ä»¶æ•°</div><div class="stat-value">${stats.totalOrders}</div></div>`;
                html += `<div class="stat-card"><div class="stat-label">ç™ºé€å¾…ã¡</div><div class="stat-value">${stats.pendingOrders}</div></div>`;
                html += `<div class="stat-card"><div class="stat-label">ç™ºé€æ¸ˆã¿</div><div class="stat-value">${stats.shippedOrders}</div></div>`;
                html += `<div class="stat-card"><div class="stat-label">ç·å£²ä¸Š</div><div class="stat-value">Â¥${stats.totalRevenue.toLocaleString('ja-JP')}</div></div>`;
                html += '</div>';
                results.innerHTML = html;
            } catch (error) {
                addTestResult('order-data-results', 'ã‚¨ãƒ©ãƒ¼', error.message, 'error');
            }
        }

        // ç®¡ç†è€…é€šçŸ¥ãƒ†ã‚¹ãƒˆ
        function testAdminNotification() {
            const results = document.getElementById('notification-test-results');
            results.innerHTML = '';

            try {
                const notif = window.AdminNotificationManager;
                addTestResult('notification-test-results', 'ç®¡ç†è€…ãƒ¡ãƒ¼ãƒ«', notif.ADMIN_EMAIL, 'success');
                addTestResult('notification-test-results', 'ç®¡ç†è€…å', notif.ADMIN_NAME, 'success');
                addTestResult('notification-test-results', 'ãƒ¡ãƒ¼ãƒ«ç”Ÿæˆãƒ¡ã‚½ãƒƒãƒ‰', notif.generateShippingNotificationEmail ? 'ã‚ã‚Š' : 'ãªã—', 'success');
            } catch (error) {
                addTestResult('notification-test-results', 'ã‚¨ãƒ©ãƒ¼', error.message, 'error');
            }
        }

        // ãƒ¡ãƒ¼ãƒ«ç”Ÿæˆãƒ†ã‚¹ãƒˆ
        function testEmailGeneration() {
            const results = document.getElementById('notification-test-results');
            results.innerHTML = '';

            try {
                const testData = {
                    orderId: 'ORD_TEST001',
                    customerName: 'ãƒ†ã‚¹ãƒˆå¤ªéƒ',
                    customerEmail: 'test@example.com',
                    carrier: 'ãƒ¤ãƒãƒˆé‹è¼¸',
                    trackingNumber: '1234567890123',
                    shippedDate: '2026-01-22',
                    estimatedDeliveryDate: '2026-01-24',
                    items: [
                        { name: 'ã»ã†ã‚Œã‚“è‰', quantity: 3 }
                    ]
                };

                const email = window.AdminNotificationManager.generateShippingNotificationEmail(testData);
                addTestResult('notification-test-results', 'ä»¶åç”Ÿæˆ', email.subject, 'success');
                addTestResult('notification-test-results', 'HTMLç”Ÿæˆ', email.html.length + ' æ–‡å­—', 'success');
                addTestResult('notification-test-results', 'ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆ', email.text.length + ' æ–‡å­—', 'success');
            } catch (error) {
                addTestResult('notification-test-results', 'ã‚¨ãƒ©ãƒ¼', error.message, 'error');
            }
        }

        // ã‚·ã‚¹ãƒ†ãƒ ãƒã‚§ãƒƒã‚¯
        function runSystemCheck() {
            const results = document.getElementById('system-check-results');
            results.innerHTML = '';

            // ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§
            addTestResult('system-check-results', 'LocalStorage', localStorage ? 'âœ“' : 'âœ—', localStorage ? 'success' : 'error');
            addTestResult('system-check-results', 'SessionStorage', sessionStorage ? 'âœ“' : 'âœ—', sessionStorage ? 'success' : 'error');

            // JavaScriptã‚µãƒãƒ¼ãƒˆ
            const jsSupport = ['Object', 'Array', 'Promise'].every(obj => typeof window[obj] !== 'undefined');
            addTestResult('system-check-results', 'JavaScript ES6', jsSupport ? 'âœ“' : 'âœ—', jsSupport ? 'success' : 'error');

            // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ­ãƒ¼ãƒ‰
            const modules = ['OrderSyncManager', 'AdminNotificationManager'];
            modules.forEach(mod => {
                const loaded = typeof window[mod] !== 'undefined';
                addTestResult('system-check-results', mod, loaded ? 'ãƒ­ãƒ¼ãƒ‰æ¸ˆ' : 'æœªãƒ­ãƒ¼ãƒ‰', loaded ? 'success' : 'error');
            });
        }

        // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
        function clearAllCache() {
            const results = document.getElementById('troubleshoot-results');
            results.innerHTML = '';

            window.OrderSyncManager.clearCache();
            addTestResult('troubleshoot-results', 'ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢', 'å®Œäº†', 'success');
        }

        // LocalStorageè¡¨ç¤º
        function viewLocalStorage() {
            const results = document.getElementById('troubleshoot-results');
            results.innerHTML = '';

            const keys = ['orderManagement_customers', 'unified_orders', 'order_sync_cache'];
            keys.forEach(key => {
                const value = localStorage.getItem(key);
                if (value) {
                    const parsed = JSON.parse(value);
                    addTestResult('troubleshoot-results', key, `${JSON.stringify(parsed).length} æ–‡å­— (${Array.isArray(parsed) ? parsed.length + 'ä»¶' : 'ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ'})`, 'success');
                } else {
                    addTestResult('troubleshoot-results', key, 'ãƒ‡ãƒ¼ã‚¿ãªã—', 'warning');
                }
            });
        }

        // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«è¡¨ç¤º
        function viewConsole() {
            alert('ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼ãƒ„ãƒ¼ãƒ«(F12)ã‚’é–‹ã„ã¦ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
        }

        // åˆæœŸè¡¨ç¤º
        console.log('=== ç™ºé€é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ  ãƒ†ã‚¹ãƒˆç’°å¢ƒ ===');
        console.log('OrderSyncManager:', window.OrderSyncManager);
        console.log('AdminNotificationManager:', window.AdminNotificationManager);
    </script>
</body>
</html>
